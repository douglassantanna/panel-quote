<div class="container mat-elevation-z2">
  <div>
    <img src="assets/Logotipo-Fram.png" alt="logotipo fram">
  </div>
  <form [formGroup]="userForm">

    <div class="header">

      <h2>
        {{step == 1 ? 'Abra sua conta' :
        step == 2 ? 'Dados pessoais':
        step == 3 ? 'Endereço Residencial' :
        step == 4 ? 'Endereço Comercial' : 'Finalizar'}}
      </h2>

      <div>
        <mat-progress-bar [value]="value" [bufferValue]="bufferValue"></mat-progress-bar>
      </div>

    </div>

    <section *ngIf="step == 1" formGroupName="loginInfo">

      <mat-form-field appearance="outline">
        <mat-label>E-mail</mat-label>
        <input matInput placeholder="E-mail" formControlName="email" type="text">
        <mat-error *ngIf="email.hasError('email') && !email.hasError('required')">
          Insira um e-mail válido.
        </mat-error>
        <mat-error *ngIf="email.hasError('required')">
          Campo obrigatório
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Celular</mat-label>
        <input matInput placeholder="Celular" formControlName="cellphoneNumber" type="number">
      </mat-form-field>

      <div class="part-field">

        <mat-form-field appearance="outline">
          <mat-label>Senha</mat-label>
          <input matInput maxlength="6" type="password" formControlName="password" [type]="hide ? 'password' : 'text'"
            placeholder="Senha de 6 dígitos" />
          <mat-error *ngIf="password.hasError('required')">
            Campo obrigatório
          </mat-error>
          <mat-error *ngIf="password.hasError('minlength')">
            Mínimo de 6 dígitos exigidos
          </mat-error>
          <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'"
            [attr.aria-pressed]="hide">
            <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
          </button>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <input matInput maxlength="6" type="password" pattern="{{password.value}}" formControlName="confirmPassword"
            [type]="hide ? 'password' : 'text'" required placeholder="Confirmar senha" />
          <mat-error *ngIf="password.value!=confirmPassword.value">
            Senhas não conferem
          </mat-error>
          <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'"
            [attr.aria-pressed]="hide">
            <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
          </button>
        </mat-form-field>

      </div>

    </section>

    <section *ngIf="step == 2" formGroupName="personalInfo">

      <mat-form-field appearance="outline">
        <mat-label>Nome</mat-label>
        <input matInput placeholder="Nome" formControlName="firstName" type="text">
        <mat-error *ngIf="firstName.hasError('required')">Nome é obrigatório</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Sobrenome</mat-label>
        <input matInput placeholder="Sobrenome" formControlName="lastName" type="text">
      </mat-form-field>

      <div class="part-field">

        <mat-form-field appearance="outline" id="cpf">
          <mat-label>CPF</mat-label>
          <input matInput placeholder="CPF" formControlName="cpf" type="number">
        </mat-form-field>

        <mat-form-field appearance="outline" id="rg">
          <mat-label>RG</mat-label>
          <input matInput placeholder="RG" formControlName="cpf" type="number">
        </mat-form-field>

      </div>

      <mat-form-field appearance="outline">
        <mat-label>Sexo</mat-label>
        <input matInput placeholder="Sexo" formControlName="cpf" type="number">
      </mat-form-field>

    </section>

    <section *ngIf="step == 3" formGroupName="residencialAddressInfo">

      <div class="part-field">

        <mat-form-field appearance="outline" id="street">
          <mat-label>Logradouro</mat-label>
          <input matInput placeholder="Logradouro" formControlName="street" type="text">
        </mat-form-field>

        <mat-form-field appearance="outline" id="number">
          <mat-label>Número</mat-label>
          <input matInput placeholder="Número" formControlName="number" type="text">
        </mat-form-field>

      </div>

      <div>

        <mat-form-field appearance="outline">
          <mat-label>CEP</mat-label>
          <input matInput placeholder="CEP" formControlName="zipcode" type="number">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Cidade</mat-label>
          <input matInput placeholder="Cidade" formControlName="city" type="text">
        </mat-form-field>
      </div>

    </section>

    <section *ngIf="step == 4" formGroupName="comercialAddressInfo">

      <div class="part-field">

        <mat-form-field appearance="outline" id="street">
          <mat-label>Logradouro</mat-label>
          <input matInput placeholder="Logradouro" formControlName="street" type="text">
        </mat-form-field>

        <mat-form-field appearance="outline" id="number">
          <mat-label>Número</mat-label>
          <input matInput placeholder="Número" formControlName="number" type="text">
        </mat-form-field>

      </div>

      <div>

        <mat-form-field appearance="outline">
          <mat-label>CEP</mat-label>
          <input matInput placeholder="CEP" formControlName="zipcode" type="number">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Cidade</mat-label>
          <input matInput placeholder="Cidade" formControlName="city" type="text">
        </mat-form-field>
      </div>

    </section>

    <div class="actions">

      <button mat-raised-button *ngIf="step != 1" color="secondary" (click)="previous()">Anterior</button>
      <button mat-raised-button color="primary" (click)="next()">Próximo</button>

    </div>
  </form>
</div>

<!-- <pre>
  {{ userForm.value | json}}
</pre> -->
